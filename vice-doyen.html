<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Vice-Doyen - Gestion Académique</title>
    <link href="style/vice-doyen.css" rel="stylesheet">
   
   
</head>
<body>
    <div class="dashboard-container">
        <div class="sidebar" id="sidebar">
            <div class="logo-container">
                <div class="logo">Vice-Doyen</div>
            </div>
            
            <div class="user-info">
                <div class="user-name">Prof. Nadir Bouchemla</div>
                <div class="user-role">Vice-Doyen - Pédagogie</div>
            </div>
            
            <div class="menu-title">Navigation</div>
            <ul class="menu">
                <li class="menu-item" onclick="changeTab('tableau-bord')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    Tableau de Bord
                </li>
                <li class="menu-item active" onclick="changeTab('affectation')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    Affectation des Étudiants
                </li>
                <li class="menu-item" onclick="changeTab('decisions')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    Décisions Exceptionnelles
                </li>
                <li class="menu-item">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="9" y1="3" x2="9" y2="21"></line>
                        <line x1="15" y1="3" x2="15" y2="21"></line>
                        <line x1="3" y1="9" x2="21" y2="9"></line>
                        <line x1="3" y1="15" x2="21" y2="15"></line>
                    </svg>
                    Gestion des Spécialités
                </li>
                <li class="menu-item">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                        <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                        <line x1="6" y1="1" x2="6" y2="4"></line>
                        <line x1="10" y1="1" x2="10" y2="4"></line>
                        <line x1="14" y1="1" x2="14" y2="4"></line>
                    </svg>
                    Calendrier Académique
                </li>
                <li class="menu-item">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                    Paramètres
                </li>
            </ul>
            
            <div class="logout">
                <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                Déconnexion
            </div>
        </div>
        
        <div class="main-content">
            <div class="dashboard-header">
                <div>
                    <h1 class="welcome-text">Bonjour, Prof. Bouchemla</h1>
                    <p class="dashboard-date">Dimanche 13 avril 2025</p>
                </div>
            </div>
            
            <!-- Tab 1: Vue d'ensemble -->
            <div class="tab-content" id="tableau-bord-content">
                <div class="cards-container">
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                            </svg>
                            Étudiants
                        </div>
                        <div class="card-value" id="total-etudiants">1,426</div>
                        <div class="card-label">Total d'étudiants inscrits</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                                <line x1="8" y1="21" x2="16" y2="21"></line>
                                <line x1="12" y1="17" x2="12" y2="21"></line>
                            </svg>
                            Spécialités
                        </div>
                        <div class="card-value" id="total-specialites">7</div>
                        <div class="card-label">Nombre de spécialités</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            Demandes
                        </div>
                        <div class="card-value" id="total-demandes">18</div>
                        <div class="card-label">Demandes en attente</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            Décisions
                        </div>
                        <div class="card-value" id="total-decisions">5</div>
                        <div class="card-label">Décisions exceptionnelles</div>
                    </div>
                </div>
            </div>
            
            <!-- Tab 2: Affectation des Étudiants -->
            <div class="tab-content active" id="affectation-content">
                <div class="content-section">
                    <h2 class="section-title">Affectation des Étudiants</h2>
                    <div class="search-filter-bar">
                        <input type="text" class="search-input" placeholder="Rechercher un étudiant...">
                        <select class="filter-select" id="filter-specialite">
                            <option value="">Toutes les spécialités</option>
                            <!-- Options générées dynamiquement -->
                        </select>
                        <select class="filter-select" id="filter-niveau">
                            <option value="">Tous les niveaux</option>
                            <!-- Options générées dynamiquement -->
                        </select>
                        <button class="search-btn">Rechercher</button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Matricule</th>
                                <th>Nom & Prénom</th>
                                <th>Spécialité</th>
                                <th>Section</th>
                                <th>Niveau</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="etudiants-table">
                            <!-- Le contenu sera généré dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Tab 3: Décisions Exceptionnelles -->
            <div class="tab-content" id="decisions-content">
                <div class="content-section">
                    <h2 class="section-title">Décisions Exceptionnelles</h2>
                    <div class="search-filter-bar">
                        <input type="text" class="search-input" placeholder="Rechercher une demande...">
                        <select class="filter-select" id="filter-type-demande">
                            <option value="">Tous les types</option>
                            <!-- Options générées dynamiquement -->
                        </select>
                        <select class="filter-select" id="filter-statut-demande">
                            <option value="">Tous les statuts</option>
                            <!-- Options générées dynamiquement -->
                        </select>
                        <button class="search-btn">Rechercher</button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Étudiant</th>
                                <th>Type</th>
                                <th>Date</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="demandes-table">
                            <!-- Le contenu sera généré dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal: Modification d'Affectation -->
    <div class="modal-backdrop" id="modal-modification">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Modifier l'Affectation de l'Étudiant</h3>
                <button class="modal-close" onclick="closeModal('modal-modification')">&times;</button>
            </div>
            <div class="modal-content">
                <form>
                    <div class="grid-2col">
                        <div class="form-group">
                            <label class="form-label">Matricule</label>
                            <input type="text" class="form-input" id="modal-matricule" disabled>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Nom & Prénom</label>
                            <input type="text" class="form-input" id="modal-nom" disabled>
                        </div>
                    </div>
                    <div class="grid-2col">
                        <div class="form-group">
                            <label class="form-label">Spécialité</label>
                            <select class="form-select" id="modal-specialite">
                                <!-- Options générées dynamiquement -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Section</label>
                            <select class="form-select" id="modal-section">
                                <!-- Options générées dynamiquement -->
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notes</label>
                        <textarea class="form-textarea" placeholder="Ajouter des notes supplémentaires..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="action-btn secondary" onclick="closeModal('modal-modification')">Annuler</button>
                        <button type="submit" class="action-btn">Enregistrer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Modal: Détails de la Demande -->
    <div class="modal-backdrop" id="modal-details">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Détails de la Demande Exceptionnelle</h3>
                <button class="modal-close" onclick="closeModal('modal-details')">&times;</button>
            </div>
            <div class="modal-content">
                <div class="grid-2col">
                    <div class="form-group">
                        <label class="form-label">ID de la Demande</label>
                        <input type="text" class="form-input" id="detail-id" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Date de Soumission</label>
                        <input type="text" class="form-input" id="detail-date" disabled>
                    </div>
                </div>
                <div class="grid-2col">
                    <div class="form-group">
                        <label class="form-label">Étudiant</label>
                        <input type="text" class="form-input" id="detail-etudiant" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Matricule</label>
                        <input type="text" class="form-input" id="detail-matricule" disabled>
                    </div>
                </div>
                <div class="grid-2col">
                    <div class="form-group">
                        <label class="form-label">Type de Demande</label>
                        <input type="text" class="form-input" id="detail-type" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Statut</label>
                        <input type="text" class="form-input" id="detail-statut" disabled>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Détails de la Demande</label>
                    <textarea class="form-textarea" id="detail-contenu" disabled></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Décision du Comité</label>
                    <textarea class="form-textarea" placeholder="Entrer la décision du comité..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="action-btn secondary" onclick="closeModal('modal-details')">Fermer</button>
                    <button type="button" class="action-btn danger">Refuser</button>
                    <button type="button" class="action-btn success">Approuver</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mobile-menu-toggle" id="mobile-menu-toggle">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </div>
    
    <script>
        // Données d'exemple pour les statistiques
        const statistiques = {
            totalEtudiants: 1426,
            totalSpecialites: 7,
            totalDemandes: 18,
            totalDecisions: 5
        };

        // Données d'exemple pour les spécialités
        const specialites = [
            { id: "info", nom: "Informatique" },
            { id: "math", nom: "Mathématiques" },
            { id: "phys", nom: "Physique" },
            { id: "chim", nom: "Chimie" },
            { id: "bio", nom: "Biologie" },
            { id: "geo", nom: "Géologie" },
            { id: "elec", nom: "Électronique" }
        ];

        // Données d'exemple pour les niveaux
        const niveaux = [
            { id: "L1", nom: "L1" },
            { id: "L2", nom: "L2" },
            { id: "L3", nom: "L3" },
            { id: "M1", nom: "M1" },
            { id: "M2", nom: "M2" }
        ];

        // Données d'exemple pour les sections
        const sections = [
            { id: "A", nom: "Section A" },
            { id: "B", nom: "Section B" },
            { id: "C", nom: "Section C" }
        ];

        // Données d'exemple pour les types de demandes
        const typesDemandes = [
            { id: "rachat", nom: "Rachat" },
            { id: "recours", nom: "Recours" },
            { id: "derogation", nom: "Dérogation" }
        ];

        // Données d'exemple pour les statuts de demandes
        const statutsDemandes = [
            { id: "pending", nom: "En attente", classe: "status-pending" },
            { id: "approved", nom: "Approuvée", classe: "status-approved" },
            { id: "denied", nom: "Refusée", classe: "status-denied" }
        ];

        // Données d'exemple pour les étudiants
        const etudiants = [
            { matricule: "202310045", nom: "Amina Khelifi", specialite: "Informatique", section: "Section A", niveau: "L2" },
            { matricule: "202310078", nom: "Karim Ferhat", specialite: "Informatique", section: "Section B", niveau: "L2" },
            { matricule: "202310091", nom: "Mohamed Belhadi", specialite: "Mathématiques", section: "Section A", niveau: "L2" },
            { matricule: "202310103", nom: "Leila Boukhalfa", specialite: "Physique", section: "Section A", niveau: "L3" },
            { matricule: "202310115", nom: "Omar Ziani", specialite: "Chimie", section: "Section A", niveau: "L3" }
        ];

        // Données d'exemple pour les demandes
        const demandes = [
            { 
                id: "DEM-2025-045", 
                etudiant: "Amina Khelifi", 
                matricule: "202310045",
                type: "Rachat", 
                date: "07/04/2025", 
                statut: "pending", 
                statutText: "En attente",
                contenu: "Je sollicite un rachat pour le module d'Analyse Numérique où j'ai obtenu la note de 9.75/20. J'ai obtenu une moyenne générale de 9.92 et il me manque seulement 0.08 point pour valider mon semestre. J'ai assisté à tous les cours et TD durant tout le semestre."
            },
            { 
                id: "DEM-2025-046", 
                etudiant: "Karim Ferhat", 
                matricule: "202310078",
                type: "Recours", 
                date: "08/04/2025", 
                statut: "pending", 
                statutText: "En attente",
                contenu: "Je souhaite faire un recours concernant ma note d'examen du module Algorithmique. Je pense qu'il y a eu une erreur dans la correction de ma copie."
            },
            { 
                id: "DEM-2025-042", 
                etudiant: "Nadia Benlakhdar", 
                matricule: "202310055",
                type: "Dérogation", 
                date: "04/04/2025", 
                statut: "approved", 
                statutText: "Approuvée",
                contenu: "Je demande une dérogation pour pouvoir m'inscrire en Master malgré mon retard dans la validation de certains modules de Licence."
            },
            { 
                id: "DEM-2025-041", 
                etudiant: "Youcef Meziane", 
                matricule: "202310033",
                type: "Rachat", 
                date: "03/04/2025", 
                statut: "denied", 
                statutText: "Refusée",
                contenu: "Je sollicite un rachat pour le module de Programmation où j'ai obtenu la note de 8.5/20."
            }
        ];

        // Fonction pour charger les données
        function loadData() {
            // Mettre à jour les statistiques
            document.getElementById('total-etudiants').textContent = statistiques.totalEtudiants;
            document.getElementById('total-specialites').textContent = statistiques.totalSpecialites;
            document.getElementById('total-demandes').textContent = statistiques.totalDemandes;
            document.getElementById('total-decisions').textContent = statistiques.totalDecisions;

            // Charger les options pour les filtres de spécialités
            const filterSpecialite = document.getElementById('filter-specialite');
            filterSpecialite.innerHTML = '<option value="">Toutes les spécialités</option>';
            specialites.forEach(specialite => {
                const option = document.createElement('option');
                option.value = specialite.id;
                option.textContent = specialite.nom;
                filterSpecialite.appendChild(option);
            });

            // Charger les options pour les filtres de niveaux
            const filterNiveau = document.getElementById('filter-niveau');
            filterNiveau.innerHTML = '<option value="">Tous les niveaux</option>';
            niveaux.forEach(niveau => {
                const option = document.createElement('option');
                option.value = niveau.id;
                option.textContent = niveau.nom;
                filterNiveau.appendChild(option);
            });

            // Charger les options pour les filtres de types de demandes
            const filterTypeDemande = document.getElementById('filter-type-demande');
            filterTypeDemande.innerHTML = '<option value="">Tous les types</option>';
            typesDemandes.forEach(type => {
                const option = document.createElement('option');
                option.value = type.id;
                option.textContent = type.nom;
                filterTypeDemande.appendChild(option);
            });

            // Charger les options pour les filtres de statuts de demandes
            const filterStatutDemande = document.getElementById('filter-statut-demande');
            filterStatutDemande.innerHTML = '<option value="">Tous les statuts</option>';
            statutsDemandes.forEach(statut => {
                const option = document.createElement('option');
                option.value = statut.id;
                option.textContent = statut.nom;
                filterStatutDemande.appendChild(option);
            });

            // Charger la table des étudiants
            const etudiantsTable = document.getElementById('etudiants-table');
            etudiantsTable.innerHTML = '';
            etudiants.forEach(etudiant => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${etudiant.matricule}</td>
                    <td>${etudiant.nom}</td>
                    <td>${etudiant.specialite}</td>
                    <td>${etudiant.section}</td>
                    <td>${etudiant.niveau}</td>
                    <td>
                        <button class="action-btn" onclick="modifierEtudiant('${etudiant.matricule}')">Modifier Affectation</button>
                    </td>
                `;
                etudiantsTable.appendChild(row);
            });

            // Charger la table des demandes
            const demandesTable = document.getElementById('demandes-table');
            demandesTable.innerHTML = '';
            demandes.forEach(demande => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${demande.id}</td>
                    <td>${demande.etudiant}</td>
                    <td>${demande.type}</td>
                    <td>${demande.date}</td>
                    <td><span class="status status-${demande.statut}">${demande.statutText}</span></td>
                    <td>
                        <button class="action-btn success" onclick="voirDetailsDemande('${demande.id}')">Voir Détails</button>
                        ${demande.statut === 'pending' ? `
                            <button class="action-btn">Approuver</button>
                            <button class="action-btn danger">Refuser</button>
                        ` : ''}
                    </td>
                `;
                demandesTable.appendChild(row);
            });

            // Charger les options pour le modal de modification
            const modalSpecialite = document.getElementById('modal-specialite');
            modalSpecialite.innerHTML = '';
            specialites.forEach(specialite => {
                const option = document.createElement('option');
                option.value = specialite.id;
                option.textContent = specialite.nom;
                modalSpecialite.appendChild(option);
            });

            const modalSection = document.getElementById('modal-section');
            modalSection.innerHTML = '';
            sections.forEach(section => {
                const option = document.createElement('option');
                option.value = section.id;
                option.textContent = section.nom;
                modalSection.appendChild(option);
            });
        }

        // Fonction pour modifier un étudiant
        function modifierEtudiant(matricule) {
            const etudiant = etudiants.find(e => e.matricule === matricule);
            if (etudiant) {
                document.getElementById('modal-matricule').value = etudiant.matricule;
                document.getElementById('modal-nom').value = etudiant.nom;
                
                // Sélectionner la spécialité
                const specialiteSelect = document.getElementById('modal-specialite');
                for (let i = 0; i < specialiteSelect.options.length; i++) {
                    if (specialiteSelect.options[i].text === etudiant.specialite) {
                        specialiteSelect.selectedIndex = i;
                        break;
                    }
                }
                
                // Sélectionner la section
                const sectionSelect = document.getElementById('modal-section');
                for (let i = 0; i < sectionSelect.options.length; i++) {
                    if (sectionSelect.options[i].text === etudiant.section) {
                        sectionSelect.selectedIndex = i;
                        break;
                    }
                }
                
                openModal('modal-modification');
            }
        }

        // Fonction pour voir les détails d'une demande
        function voirDetailsDemande(id) {
            const demande = demandes.find(d => d.id === id);
            if (demande) {
                document.getElementById('detail-id').value = demande.id;
                document.getElementById('detail-date').value = demande.date;
                document.getElementById('detail-etudiant').value = demande.etudiant;
                document.getElementById('detail-matricule').value = demande.matricule;
                document.getElementById('detail-type').value = demande.type;
                document.getElementById('detail-statut').value = demande.statutText;
                document.getElementById('detail-contenu').value = demande.contenu;
                
                openModal('modal-details');
            }
        }

        // Tab Navigation
        function activateTab(tabElement, contentId) {
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Add active class to clicked tab
            tabElement.classList.add('active');
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(contentId).classList.add('active');
        }
        
        // Change tab on menu click
        function changeTab(tabName) {
            // Handle menu active state
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // Map menu items to tab content
            const tabMap = {
                'tableau-bord': 'tableau-bord-content',
                'affectation': 'affectation-content',
                'decisions': 'decisions-content'
            };
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabMap[tabName]).classList.add('active');
            
            // Update tab navigation
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Find and activate the corresponding tab
            document.querySelectorAll('.tab').forEach(tab => {
                if (tab.getAttribute('onclick').includes(tabMap[tabName])) {
                    tab.classList.add('active');
                }
            });
            
            // Close mobile menu if open
            document.getElementById('sidebar').classList.remove('active');
        }
        
        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Mobile menu toggle
        document.getElementById('mobile-menu-toggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('active');
        });

        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            document.querySelectorAll('.modal-backdrop').forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // Initialiser les données au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
        });

        document.addEventListener('DOMContentLoaded', function() {
            const REQUIRED_ROLE = 'vice-doyen'; // Hardcoded role
            const token = sessionStorage.getItem('admin_token') || localStorage.getItem('admin_token');
            
            if (!token) {
                window.location.href = `admin-login.html?requestedRole=${REQUIRED_ROLE}`;
                return;
            }
        
            fetch('http://localhost:3000/api/auth/verify', {
                method: 'GET',
                headers: { 
                  'Authorization': `Bearer ${token}`,
                  'Content-Type': 'application/json'
                },
                mode: 'cors',
                credentials: 'include'
              })
            .then(response => {
                if (!response.ok) throw new Error('Invalid token');
                return response.json();
            })
            .then(data => {
                if (data.adminRole !== REQUIRED_ROLE) {
                    throw new Error('Role mismatch');
                }
                // Load protected content here
            })
            .catch(error => {
                console.error('Access denied:', error);
                sessionStorage.clear();
                localStorage.clear();
                window.location.href = `admin-login.html?requestedRole=${REQUIRED_ROLE}`;
            });
        });

    </script>
</body>
</html>