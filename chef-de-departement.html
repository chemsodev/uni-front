<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Chef de Département - Gestion Académique</title>
    <link href="style/chef-de-departement.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <div class="sidebar" id="sidebar">
            <div class="logo-container">
                <div class="logo">Chef de Département</div>
            </div>
            
            <div class="user-info">
                <div class="user-name">Prof. Mohamed Belhadi</div>
                <div class="user-role">Chef Dépt. Informatique</div>
            </div>
            
            <div class="menu-title">Navigation</div>
            <ul class="menu">
                <li class="menu-item" onclick="changeTab('tableau-bord')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    Tableau de Bord
                </li>
                <li class="menu-item active" onclick="changeTab('specialites')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                        <line x1="8" y1="21" x2="16" y2="21"></line>
                        <line x1="12" y1="17" x2="12" y2="21"></line>
                    </svg>
                    Gestion des Spécialités
                </li>
                <li class="menu-item" onclick="changeTab('enseignants')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    Gestion des Enseignants
                </li>
                <li class="menu-item" onclick="changeTab('etudiants')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    Gestion des Étudiants
                </li>
                <li class="menu-item" onclick="changeTab('sanctions')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                    Sanctions et Validations
                </li>
                <li class="menu-item">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                    Paramètres
                </li>
            </ul>
            
            <div class="logout">
                <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                Déconnexion
            </div>
        </div>
        
        <div class="main-content">
            <div class="dashboard-header">
                <div>
                    <h1 class="welcome-text">Bonjour, Prof. Belhadi</h1>
                    <p class="dashboard-date">Dimanche 13 avril 2025</p>
                </div>
            </div>
            
            <!-- Tab 1: Vue d'ensemble -->
            <div class="tab-content" id="tableau-bord-content">
                <div class="cards-container">
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                            </svg>
                            Étudiants
                        </div>
                        <div class="card-value" id="total-etudiants">512</div>
                        <div class="card-label">Total d'étudiants en informatique</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            Enseignants
                        </div>
                        <div class="card-value" id="total-enseignants">32</div>
                        <div class="card-label">Nombre d'enseignants</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                                <line x1="8" y1="21" x2="16" y2="21"></line>
                                <line x1="12" y1="17" x2="12" y2="21"></line>
                            </svg>
                            Spécialités
                        </div>
                        <div class="card-value" id="total-specialites">3</div>
                        <div class="card-label">Options disponibles</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            Demandes
                        </div>
                        <div class="card-value" id="total-demandes">8</div>
                        <div class="card-label">Demandes à traiter</div>
                    </div>
                </div>
            </div>
            
            <!-- Tab 2: Gestion des Spécialités -->
            <div class="tab-content active" id="specialites-content">
                <div class="content-section">
                    <h2 class="section-title">Gestion des Spécialités</h2>
                    <div class="search-filter-bar">
                        <input type="text" class="search-input" placeholder="Rechercher une spécialité...">
                        <select class="filter-select">
                            <option value="">Tous les niveaux</option>
                            <option value="L1">L1</option>
                            <option value="L2">L2</option>
                            <option value="L3">L3</option>
                            <option value="M1">M1</option>
                            <option value="M2">M2</option>
                        </select>
                        <button class="search-btn">Rechercher</button>
                        <button class="action-btn success" onclick="openModal('modal-ajout-specialite')">Ajouter une spécialité</button>
                    </div>
                    
                    <table id="specialites-table">
                        <thead>
                            <tr>
                                <th>Code</th>
                                <th>Nom de la spécialité</th>
                                <th>Niveau</th>
                                <th>Nombre d'étudiants</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Les données seront chargées dynamiquement ici -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Tab 3: Gestion des Enseignants -->
            <div class="tab-content" id="enseignants-content">
                <div class="content-section">
                    <h2 class="section-title">Gestion des Enseignants</h2>
                    <div class="search-filter-bar">
                        <input type="text" class="search-input" placeholder="Rechercher un enseignant...">
                        <select class="filter-select">
                            <option value="">Tous les grades</option>
                            <option value="prof">Professeur</option>
                            <option value="mca">Maître de Conférences A</option>
                            <option value="mcb">Maître de Conférences B</option>
                            <option value="maa">Maître Assistant A</option>
                            <option value="mab">Maître Assistant B</option>
                            <option value="vacataire">Vacataire</option>
                        </select>
                        <button class="search-btn">Rechercher</button>
                        <button class="action-btn success" onclick="openModal('modal-ajout-enseignant')">Ajouter un enseignant</button>
                    </div>
                    
                    <table id="enseignants-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nom</th>
                                <th>Grade</th>
                                <th>Spécialité</th>
                                <th>Email</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Les données seront chargées dynamiquement ici -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Tab 4: Gestion des Étudiants -->
            <div class="tab-content" id="etudiants-content">
                <div class="content-section">
                    <h2 class="section-title">Gestion des Étudiants</h2>
                    <div class="search-filter-bar">
                        <input type="text" class="search-input" placeholder="Rechercher un étudiant...">
                        <select class="filter-select">
                            <option value="">Toutes les spécialités</option>
                            <option value="GL">Génie Logiciel</option>
                            <option value="SI">Systèmes d'Information</option>
                            <option value="IA">Intelligence Artificielle</option>
                        </select>
                        <button class="search-btn">Rechercher</button>
                        <button class="action-btn success" onclick="openModal('modal-ajout-etudiant')">Ajouter un étudiant</button>
                    </div>
                    
                    <table id="etudiants-table">
                        <thead>
                            <tr>
                                <th>Matricule</th>
                                <th>Nom</th>
                                <th>Prénom</th>
                                <th>Niveau</th>
                                <th>Spécialité</th>
                                <th>Moyenne</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Les données seront chargées dynamiquement ici -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Tab 5: Sanctions et Validations -->
            <div class="tab-content" id="sanctions-content">
                <div class="content-section">
                    <h2 class="section-title">Sanctions et Validations</h2>
                    <div class="search-filter-bar">
                        <input type="text" class="search-input" placeholder="Rechercher...">
                        <select class="filter-select">
                            <option value="">Tous les types</option>
                            <option value="sanction">Sanctions</option>
                            <option value="validation">Validations</option>
                        </select>
                        <select class="filter-select">
                            <option value="">Tous les statuts</option>
                            <option value="pending">En attente</option>
                            <option value="approved">Approuvé</option>
                            <option value="denied">Refusé</option>
                        </select>
                        <button class="search-btn">Rechercher</button>
                    </div>
                    
                    <table id="sanctions-table">
                        <thead>
                            <tr>
                                <th>Réf.</th>
                                <th>Étudiant</th>
                                <th>Type</th>
                                <th>Description</th>
                                <th>Date</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Les données seront chargées dynamiquement ici -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <!-- Modal Ajout Spécialité -->
    <div class="modal-backdrop" id="modal-ajout-specialite">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Ajouter une nouvelle spécialité</h2>
                <button class="modal-close" onclick="closeModal('modal-ajout-specialite')">&times;</button>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label class="form-label">Code de la spécialité</label>
                    <input type="text" class="form-input" placeholder="Ex: INF-GL">
                </div>
                <div class="form-group">
                    <label class="form-label">Nom de la spécialité</label>
                    <input type="text" class="form-input" placeholder="Ex: Génie Logiciel">
                </div>
                <div class="form-group">
                    <label class="form-label">Niveau</label>
                    <select class="form-select">
                        <option value="">Sélectionner un niveau</option>
                        <option value="L1">L1</option>
                        <option value="L2">L2</option>
                        <option value="L3">L3</option>
                        <option value="M1">M1</option>
                        <option value="M2">M2</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" placeholder="Description de la spécialité..."></textarea>
                </div>
                <div class="form-actions">
                    <button class="action-btn secondary" onclick="closeModal('modal-ajout-specialite')">Annuler</button>
                    <button class="action-btn success">Enregistrer</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Modifier Spécialité -->
    <div class="modal-backdrop" id="modal-modifier-specialite">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Modifier la spécialité</h2>
                <button class="modal-close" onclick="closeModal('modal-modifier-specialite')">&times;</button>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label class="form-label">Code de la spécialité</label>
                    <input type="text" class="form-input" id="edit-specialite-code">
                </div>
                <div class="form-group">
                    <label class="form-label">Nom de la spécialité</label>
                    <input type="text" class="form-input" id="edit-specialite-nom">
                </div>
                <div class="form-group">
                    <label class="form-label">Niveau</label>
                    <select class="form-select" id="edit-specialite-niveau">
                        <option value="L1">L1</option>
                        <option value="L2">L2</option>
                        <option value="L3">L3</option>
                        <option value="M1">M1</option>
                        <option value="M2">M2</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" id="edit-specialite-description"></textarea>
                </div>
                <div class="form-actions">
                    <button class="action-btn secondary" onclick="closeModal('modal-modifier-specialite')">Annuler</button>
                    <button class="action-btn success">Enregistrer les modifications</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script>
        // Données d'exemple pour les spécialités
        const specialitesData = [
            { code: "INF-GL", nom: "Génie Logiciel", niveau: "L3", nbEtudiants: 78 },
            { code: "INF-SI", nom: "Systèmes d'Information", niveau: "L3", nbEtudiants: 65 },
            { code: "INF-IA", nom: "Intelligence Artificielle", niveau: "M1", nbEtudiants: 42 },
            { code: "INF-RS", nom: "Réseaux et Sécurité", niveau: "M1", nbEtudiants: 38 },
            { code: "INF-BD", nom: "Big Data", niveau: "M2", nbEtudiants: 25 }
        ];

        // Données d'exemple pour les enseignants
        const enseignantsData = [
            { id: "ENS-001", nom: "Dr. Ahmed Mebarki", grade: "Maître de Conférences A", specialite: "Génie Logiciel", email: "a.mebarki@univ.dz" },
            { id: "ENS-002", nom: "Dr. Samia Benali", grade: "Professeur", specialite: "Intelligence Artificielle", email: "s.benali@univ.dz" },
            { id: "ENS-003", nom: "M. Karim Hadjali", grade: "Maître Assistant A", specialite: "Systèmes d'Information", email: "k.hadjali@univ.dz" },
            { id: "ENS-004", nom: "Dr. Fatima Zohra", grade: "Maître de Conférences B", specialite: "Réseaux", email: "f.zohra@univ.dz" },
            { id: "ENS-005", nom: "Prof. Rachid Ameur", grade: "Professeur", specialite: "Big Data", email: "r.ameur@univ.dz" }
        ];

        // Données d'exemple pour les étudiants
        const etudiantsData = [
            { matricule: "2022-0123", nom: "Bencherif", prenom: "Yasmine", niveau: "L3", specialite: "Génie Logiciel", moyenne: 15.75 },
            { matricule: "2022-0234", nom: "Boudiaf", prenom: "Mohamed", niveau: "L3", specialite: "Systèmes d'Information", moyenne: 13.20 },
            { matricule: "2021-0456", nom: "Amrani", prenom: "Sofiane", niveau: "M1", specialite: "Intelligence Artificielle", moyenne: 14.90 },
            { matricule: "2022-0345", nom: "Khelifi", prenom: "Amina", niveau: "L3", specialite: "Génie Logiciel", moyenne: 16.30 },
            { matricule: "2021-0567", nom: "Benmoussa", prenom: "Karim", niveau: "M1", specialite: "Réseaux et Sécurité", moyenne: 12.85 }
        ];

        // Données d'exemple pour les sanctions et validations
        const sanctionsData = [
            { ref: "SAN-2025-001", etudiant: "Mohamed Boudiaf", type: "Sanction", description: "Absence non justifiée (3 séances)", date: "05/04/2025", statut: "pending" },
            { ref: "VAL-2025-007", etudiant: "Yasmine Bencherif", type: "Validation", description: "Validation de stage", date: "02/04/2025", statut: "approved" },
            { ref: "SAN-2025-002", etudiant: "Sofiane Amrani", type: "Sanction", description: "Plagiat détecté dans le projet", date: "01/04/2025", statut: "denied" },
            { ref: "VAL-2025-008", etudiant: "Amina Khelifi", type: "Validation", description: "Validation de projet", date: "03/04/2025", statut: "pending" },
            { ref: "SAN-2025-003", etudiant: "Karim Benmoussa", type: "Sanction", description: "Comportement inapproprié", date: "30/03/2025", statut: "approved" }
        ];

        // Fonction pour charger les données dynamiquement
        function loadData() {
            // Mettre à jour les compteurs
            document.getElementById('total-etudiants').textContent = etudiantsData.length;
            document.getElementById('total-enseignants').textContent = enseignantsData.length;
            document.getElementById('total-specialites').textContent = specialitesData.length;
            document.getElementById('total-demandes').textContent = sanctionsData.filter(s => s.statut === 'pending').length;
            
            // Charger les spécialités
            const specialitesTable = document.getElementById('specialites-table').getElementsByTagName('tbody')[0];
            specialitesTable.innerHTML = '';
            specialitesData.forEach(specialite => {
                const row = specialitesTable.insertRow();
                row.innerHTML = `
                    <td>${specialite.code}</td>
                    <td>${specialite.nom}</td>
                    <td>${specialite.niveau}</td>
                    <td>${specialite.nbEtudiants}</td>
                    <td>
                        <button class="action-btn" onclick="editSpecialite('${specialite.code}')">Modifier</button>
                        <button class="action-btn danger" onclick="deleteSpecialite('${specialite.code}')">Supprimer</button>
                    </td>
                `;
            });
            
            // Charger les enseignants
            const enseignantsTable = document.getElementById('enseignants-table').getElementsByTagName('tbody')[0];
            enseignantsTable.innerHTML = '';
            enseignantsData.forEach(enseignant => {
                const row = enseignantsTable.insertRow();
                row.innerHTML = `
                    <td>${enseignant.id}</td>
                    <td>${enseignant.nom}</td>
                    <td>${enseignant.grade}</td>
                    <td>${enseignant.specialite}</td>
                    <td>${enseignant.email}</td>
                    <td>
                        <button class="action-btn" onclick="editEnseignant('${enseignant.id}')">Modifier</button>
                        <button class="action-btn danger" onclick="deleteEnseignant('${enseignant.id}')">Supprimer</button>
                    </td>
                `;
            });
            
            // Charger les étudiants
            const etudiantsTable = document.getElementById('etudiants-table').getElementsByTagName('tbody')[0];
            etudiantsTable.innerHTML = '';
            etudiantsData.forEach(etudiant => {
                const row = etudiantsTable.insertRow();
                row.innerHTML = `
                    <td>${etudiant.matricule}</td>
                    <td>${etudiant.nom}</td>
                    <td>${etudiant.prenom}</td>
                    <td>${etudiant.niveau}</td>
                    <td>${etudiant.specialite}</td>
                    <td>${etudiant.moyenne}</td>
                    <td>
                        <button class="action-btn" onclick="editEtudiant('${etudiant.matricule}')">Modifier</button>
                        <button class="action-btn danger" onclick="deleteEtudiant('${etudiant.matricule}')">Supprimer</button>
                    </td>
                `;
            });
            
            // Charger les sanctions
            const sanctionsTable = document.getElementById('sanctions-table').getElementsByTagName('tbody')[0];
            sanctionsTable.innerHTML = '';
            sanctionsData.forEach(sanction => {
                const row = sanctionsTable.insertRow();
                let statutClass = '';
                let statutText = '';
                
                switch(sanction.statut) {
                    case 'pending':
                        statutClass = 'status-pending';
                        statutText = 'En attente';
                        break;
                    case 'approved':
                        statutClass = 'status-approved';
                        statutText = 'Approuvé';
                        break;
                    case 'denied':
                        statutClass = 'status-denied';
                        statutText = 'Refusé';
                        break;
                }
                
                let actions = '';
                if (sanction.statut === 'pending') {
                    actions = `
                        <button class="action-btn success" onclick="approveSanction('${sanction.ref}')">Approuver</button>
                        <button class="action-btn danger" onclick="denySanction('${sanction.ref}')">Refuser</button>
                    `;
                } else {
                    actions = `<button class="action-btn secondary" onclick="viewSanctionDetails('${sanction.ref}')">Détails</button>`;
                }
                
                row.innerHTML = `
                    <td>${sanction.ref}</td>
                    <td>${sanction.etudiant}</td>
                    <td>${sanction.type}</td>
                    <td>${sanction.description}</td>
                    <td>${sanction.date}</td>
                    <td><span class="status ${statutClass}">${statutText}</span></td>
                    <td>${actions}</td>
                `;
            });
        }

        // Fonction pour modifier une spécialité
        function editSpecialite(code) {
            const specialite = specialitesData.find(s => s.code === code);
            if (specialite) {
                document.getElementById('edit-specialite-code').value = specialite.code;
                document.getElementById('edit-specialite-nom').value = specialite.nom;
                document.getElementById('edit-specialite-niveau').value = specialite.niveau;
                document.getElementById('edit-specialite-description').value = "La spécialité " + specialite.nom + " forme des informaticiens spécialisés dans ce domaine.";
                openModal('modal-modifier-specialite');
            }
        }

        // Fonction pour supprimer une spécialité
        function deleteSpecialite(code) {
            if (confirm(`Êtes-vous sûr de vouloir supprimer la spécialité ${code} ?`)) {
                // Simulation de suppression
                const index = specialitesData.findIndex(s => s.code === code);
                if (index !== -1) {
                    specialitesData.splice(index, 1);
                    loadData();
                }
            }
        }

        // Fonction pour modifier un enseignant
        function editEnseignant(id) {
            // Simulation d'ouverture du modal de modification
            alert(`Modification de l'enseignant avec ID: ${id}`);
        }

        // Fonction pour supprimer un enseignant
        function deleteEnseignant(id) {
            if (confirm(`Êtes-vous sûr de vouloir supprimer l'enseignant avec ID ${id} ?`)) {
                // Simulation de suppression
                const index = enseignantsData.findIndex(e => e.id === id);
                if (index !== -1) {
                    enseignantsData.splice(index, 1);
                    loadData();
                }
            }
        }

        // Fonction pour modifier un étudiant
        function editEtudiant(matricule) {
            // Simulation d'ouverture du modal de modification
            alert(`Modification de l'étudiant avec matricule: ${matricule}`);
        }

        // Fonction pour supprimer un étudiant
        function deleteEtudiant(matricule) {
            if (confirm(`Êtes-vous sûr de vouloir supprimer l'étudiant avec matricule ${matricule} ?`)) {
                // Simulation de suppression
                const index = etudiantsData.findIndex(e => e.matricule === matricule);
                if (index !== -1) {
                    etudiantsData.splice(index, 1);
                    loadData();
                }
            }
        }

        // Fonctions pour les sanctions
        function approveSanction(ref) {
            const index = sanctionsData.findIndex(s => s.ref === ref);
            if (index !== -1) {
                sanctionsData[index].statut = 'approved';
                loadData();
            }
        }

        function denySanction(ref) {
            const index = sanctionsData.findIndex(s => s.ref === ref);
            if (index !== -1) {
                sanctionsData[index].statut = 'denied';
                loadData();
            }
        }

        function viewSanctionDetails(ref) {
            // Simulation d'affichage des détails
            alert(`Détails de la sanction/validation avec référence: ${ref}`);
        }

        // Function to change tab
        function changeTab(tabId) {
            // Hide all tab contents
            var tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(function(content) {
                content.classList.remove('active');
            });
            
            // Remove active class from all menu items
            var menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(function(item) {
                item.classList.remove('active');
            });
            
            // Show the selected tab content
            document.getElementById(tabId + '-content').classList.add('active');
            
            // Add active class to the clicked menu item
            event.currentTarget.classList.add('active');
        }
        
        // Function to open modal
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        // Function to close modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal-backdrop')) {
                event.target.style.display = 'none';
            }
        }
        
        // Mobile menu toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Create mobile menu toggle button if it doesn't exist
            if (!document.querySelector('.mobile-menu-toggle')) {
                var toggleBtn = document.createElement('div');
                toggleBtn.className = 'mobile-menu-toggle';
                toggleBtn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>';
                document.body.appendChild(toggleBtn);
                
                toggleBtn.addEventListener('click', function() {
                    var sidebar = document.getElementById('sidebar');
                    sidebar.classList.toggle('active');
                });
            }
            
            // Charger les données au chargement de la page
            loadData();
            
            // Mettre à jour la date
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const today = new Date();
            document.querySelector('.dashboard-date').textContent = today.toLocaleDateString('fr-FR', options);
        });

        
        document.addEventListener('DOMContentLoaded', function() {
            const REQUIRED_ROLE = 'chef-de-departement'; // Hardcoded role
            const token = sessionStorage.getItem('admin_token') || localStorage.getItem('admin_token');
            
            if (!token) {
                window.location.href = `admin-login.html?requestedRole=${REQUIRED_ROLE}`;
                return;
            }
        
            fetch('http://localhost:3000/api/auth/verify', {
                method: 'GET',
                headers: { 
                  'Authorization': `Bearer ${token}`,
                  'Content-Type': 'application/json'
                },
                mode: 'cors',
                credentials: 'include'
              })
            .then(response => {
                if (!response.ok) throw new Error('Invalid token');
                return response.json();
            })
            .then(data => {
                if (data.userType !== REQUIRED_ROLE) {
                    throw new Error('Role mismatch');
                }
                // Load protected content here
            })
            .catch(error => {
                console.error('Access denied:', error);
                sessionStorage.clear();
                localStorage.clear();
                window.location.href = `admin-login.html?requestedRole=${REQUIRED_ROLE}`;
            });
        });
        
    </script>
</body>
</html>