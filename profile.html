<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Profil Personnel Étudiant</title>
    <link href="style/profile.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <div id="navbar-container"></div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1 class="page-title">Profil Personnel</h1>
            </div>
            
            <div class="profile-container">
                <div class="profile-tabs">
                    <div class="profile-tab active">Voir mes informations</div>
                    <div class="profile-tab">
                        <a href="profile-edit.html" class="nav-link">Modifier mes coordonnées</a>
                    </div>
                </div>

                <!-- Voir ses informations personnelles -->
                <div class="profile-section">
                    <div class="profile-photo">
                        <div class="photo-container" id="profile-photo">ID</div>
                        <label class="upload-btn">
                            Changer la photo
                            <input type="file" style="display: none;">
                        </label>
                    </div>
                    
                    <h2 class="section-title">Informations personnelles</h2>
                    <div class="profile-info">
                        <div class="info-item">
                            <div class="info-label">Nom</div>
                            <div class="info-value" data-field="nom" id="nom"></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Prénom</div>
                            <div class="info-value" data-field="prenom" id="prenom"></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Numéro Étudiant</div>
                            <div class="info-value" data-field="matricule" id="matricule"></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Nationalité</div>
                            <div class="info-value" data-field="nationalite"></div>
                        </div>
                    </div>
                    
                    <h2 class="section-title">Coordonnées</h2>
                    <div class="profile-info">
                        <div class="info-item">
                            <div class="info-label">Email</div>
                            <div class="info-value" data-field="email"></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Téléphone</div>
                            <div class="info-value" data-field="telephone"></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Adresse</div>
                            <div class="info-value" data-field="adresse"></div>
                        </div>
                    </div>
                    
                    <h2 class="section-title">Informations académiques</h2>
                    <div class="profile-info">
                        <div class="info-item">
                            <div class="info-label">Filière</div>
                            <div class="info-value" data-field="filiere" id="filiere"></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Section</div>
                            <div class="info-value" data-field="section" id="section"></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Groupe TD</div>
                            <div class="info-value" data-field="groupeTD" id="tdGroup"></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Groupe TP</div>
                            <div class="info-value" data-field="groupeTP" id="tpGroup"></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Niveau</div>
                            <div class="info-value" data-field="niveau"></div>
                        </div>
                    </div>
                    
                    <h2 class="section-title">Besoins spécifiques</h2>
                    <div class="profile-info">
                        <div class="info-item">
                            <div class="info-label">Situation de handicap</div>
                            <div class="info-value" data-field="handicap"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const studentData = JSON.parse(localStorage.getItem('studentData'));
        if (!studentData) {
            console.warn("Aucune donnée étudiant trouvée dans le localStorage.");
            return;
        }

        // Charger la navbar
        fetch('etudiant-nav.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('navbar-container').innerHTML = html;

                const avatar = document.getElementById('userAvatar');
                const fullName = document.getElementById('userFullName');
                const userId = document.getElementById('userId');

                if (avatar) avatar.textContent = studentData.prenom.charAt(0) + studentData.nom.charAt(0);
                if (fullName) fullName.textContent = `${studentData.nom} ${studentData.prenom}`;
                if (userId) userId.textContent = `Matricule: ${studentData.matricule}`;

                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === window.location.pathname.split('/').pop()) {
                        link.classList.add('active');
                    }
                });
            });

        Object.keys(studentData).forEach(key => {
            const elements = document.querySelectorAll(`[data-field="${key}"]`);
            elements.forEach(el => {
                el.textContent = studentData[key];
            });
        });

        // Initiales dans la photo de profil
        const initials = studentData.prenom.charAt(0) + studentData.nom.charAt(0);
        const profilePhoto = document.getElementById('profile-photo');
        if (profilePhoto) {
            profilePhoto.textContent = initials;
        }
    });
    </script>
</body>
</html>
