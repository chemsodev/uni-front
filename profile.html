<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Profil Personnel Étudiant</title>
    <link href="style/profile.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <div id="navbar-container"></div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1 class="page-title">Profil Personnel</h1>
            </div>
            
            <div class="profile-container">
                <div class="profile-tabs">
                    <div class="profile-tab active">Voir mes informations</div>
                    <div class="profile-tab">
                        <a href="profile-edit.html" class="nav-link">Modifier mes coordonnées</a>
                    </div>
                </div>

                <!-- Voir ses informations personnelles -->
                <div class="profile-section">
                    <div class="profile-photo">
                        <div class="photo-container" id="profile-photo">ID</div>
                        <label class="upload-btn">
                            Changer la photo
                            <input type="file" style="display: none;">
                        </label>
                    </div>
                    
                    <h2 class="section-title">Informations personnelles</h2>
                    <div class="profile-info">
                        <div class="info-item">
                            <div class="info-label">Nom</div>
                            <div class="info-value" data-field="nom"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Prénom</div>
                            <div class="info-value" data-field="prenom"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Numéro Étudiant</div>
                            <div class="info-value" data-field="matricule"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Nationalité</div>
                            <div class="info-value" data-field="nationalite"></div>
                        </div>
                    </div>
                    
                    <h2 class="section-title">Coordonnées</h2>
                    <div class="profile-info">
                        <div class="info-item">
                            <div class="info-label">Email</div>
                            <div class="info-value" data-field="email"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Téléphone</div>
                            <div class="info-value" data-field="telephone"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Adresse</div>
                            <div class="info-value" data-field="adresse"></div>
                        </div>
                    </div>
                    
                    <h2 class="section-title">Informations académiques</h2>
                    <div class="profile-info">
                        <div class="info-item">
                            <div class="info-label">Filière</div>
                            <div class="info-value" data-field="filiere"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Section</div>
                            <div class="info-value" data-field="section"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Groupe TD</div>
                            <div class="info-value" data-field="groupeTD"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Groupe TP</div>
                            <div class="info-value" data-field="groupeTP"></div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">Niveau</div>
                            <div class="info-value" data-field="niveau"></div>
                        </div>
                    </div>
                    
                    <h2 class="section-title">Besoins spécifiques</h2>
                    <div class="profile-info">
                        <div class="info-item">
                            <div class="info-label">Situation de handicap</div>
                            <div class="info-value" data-field="handicap"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const studentData = {
            nom: "Doumaa",
            prenom: "Imane Heeni",
            matricule: "20230456",
            nationalite: "Algérienne",
            email: "imane.douma@etudiant.universite.fr",
            telephone: "+213 5 55 78 92 31",
            adresse: "123 Rue des Étudiants, Alger",
            filiere: "Informatique",
            section: "B",
            groupeTD: "3",
            groupeTP: "2",
            niveau: "2ème année",
            handicap: "Non"
        };
    
        // Sauvegarder les données dans localStorage
        localStorage.setItem('studentData', JSON.stringify(studentData));
    
        function populateAllFields() {
            // Récupérer les données depuis localStorage
            const data = JSON.parse(localStorage.getItem('studentData')) || studentData;
            
            // Remplir tous les champs avec data-field
            Object.keys(data).forEach(key => {
                const fieldElements = document.querySelectorAll(`[data-field="${key}"]`);
                fieldElements.forEach(element => {
                    element.textContent = data[key];
                });
            });
    
            // Remplir la photo de profil
            const initials = data.prenom.charAt(0) + data.nom.charAt(0);
            document.getElementById('profile-photo').textContent = initials;
        }
    
        function setupNavbar() {
            const data = JSON.parse(localStorage.getItem('studentData')) || studentData;
            const avatar = document.getElementById('userAvatar');
            const fullName = document.getElementById('userFullName');
            const userId = document.getElementById('userId');
            
            if (avatar) avatar.textContent = data.prenom.charAt(0) + data.nom.charAt(0);
            if (fullName) fullName.textContent = `${data.nom} ${data.prenom}`;
            if (userId) userId.textContent = `Matricule: ${data.matricule}`;
        }
    
        document.addEventListener('DOMContentLoaded', function() {
            fetch('etudiant-nav.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('navbar-container').innerHTML = html;
                    populateAllFields();
                    setupNavbar();
                    const navScript = document.createElement('script');
            navScript.innerHTML = `
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if(link.getAttribute('href') === '${window.location.pathname.split('/').pop()}') {
                        link.classList.add('active');
                    }
                });
            `;
            document.body.appendChild(navScript);
        });
});
    </script>
</body>
</html>