<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Secrétaire/Agent - Gestion Académique</title>
    <link href="style/secretaire-agent.css" rel="stylesheet">
   
</head>
<body>
    <div class="dashboard-container">
        <div class="sidebar" id="sidebar">
            <div class="logo-container">
                <div class="logo">Secrétaire</div>
            </div>
            
            <div class="user-info">
                <div class="user-name">Mme. Samia Maouche</div>
                <div class="user-role">Secrétaire Administrative</div>
            </div>
            
            <div class="menu-title">Navigation</div>
            <ul class="menu">
                <li class="menu-item" onclick="changeTab('tableau-bord')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    Tableau de Bord
                </li>
                <li class="menu-item active" onclick="changeTab('plannings')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Gestion des Plannings
                </li>
                <li class="menu-item" onclick="changeTab('notifications')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    Notifications
                    <span class="badge">8</span>
                </li>
                <li class="menu-item" onclick="changeTab('dossiers')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                    Dossiers Administratifs
                </li>
                <li class="menu-item" onclick="changeTab('demandes')">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    Demandes Étudiants
                </li>
            </ul>
            
            <div class="logout">
                <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                Déconnexion
            </div>
        </div>
        
        <div class="main-content">
            <div class="dashboard-header">
                <div>
                    <h1 class="welcome-text">Bonjour, Mme. Maouche</h1>
                    <p class="dashboard-date" id="current-date">Lundi 14 avril 2025</p>
                </div>
            </div>
            
            <!-- Tab 1: Vue d'ensemble -->
            <div class="tab-content" id="tableau-bord-content">
                <div class="cards-container">
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            Plannings
                        </div>
                        <div class="card-value" id="total-cours">48</div>
                        <div class="card-label">Cours programmés cette semaine</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            Dossiers
                        </div>
                        <div class="card-value" id="total-dossiers">21</div>
                        <div class="card-label">Dossiers validés</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            Demandes
                        </div>
                        <div class="card-value" id="total-demandes">12</div>
                        <div class="card-label">Demandes en attente</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                            Notifications
                        </div>
                        <div class="card-value" id="total-notifications">8</div>
                        <div class="card-label">Notifications à envoyer</div>
                    </div>
                </div>
                
                <div class="content-section">
                    <h2 class="section-title">Activités Récentes</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Action</th>
                                <th>Détails</th>
                                <th>Date</th>
                                <th>Statut</th>
                            </tr>
                        </thead>
                        <tbody id="activites-recentes-table">
                            <!-- Le contenu sera généré dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Tab 2: Gestion des Plannings -->
            <div class="tab-content active" id="planning-enseignants-content">
                <div class="content-section">
                    <h2 class="section-title">Planning des Enseignants</h2>
                    <div class="search-filter-bar">
                        <input type="text" class="search-input" placeholder="Rechercher un enseignant...">
                        <select class="filter-select" id="filter-enseignant">
                            <option value="">Tous les enseignants</option>
                            <!-- Options générées dynamiquement -->
                        </select>
                        <select class="filter-select" id="filter-jour">
                            <option value="">Toute la semaine</option>
                            <!-- Options générées dynamiquement -->
                        </select>
                        <button class="search-btn">Rechercher</button>
                        <button class="action-btn success" onclick="openModal('add-course-modal')">Ajouter un cours</button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Enseignant</th>
                                <th>Module</th>
                                <th>Groupe</th>
                                <th>Salle</th>
                                <th>Date</th>
                                <th>Horaire</th>
                                <th>Type</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="planning-table">
                            <!-- Le contenu sera généré dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Tab 3: Gestion des Conflits -->
            <div class="tab-content" id="conflits-content">
                <div class="content-section">
                    <h2 class="section-title">Conflits Détectés</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Type de conflit</th>
                                <th>Description</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="conflits-table">
                            <!-- Le contenu sera généré dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Notifications Tab -->
            <div class="tab-content" id="notifications-content">
                <div class="content-section">
                    <h2 class="section-title">Notifications à Envoyer</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Destinataire</th>
                                <th>Objet</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="notifications-table">
                            <!-- Le contenu sera généré dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Dossiers Tab -->
            <div class="tab-content" id="dossiers-content">
                <div class="content-section">
                    <h2 class="section-title">Dossiers Administratifs</h2>
                    <div class="search-filter-bar">
                        <input type="text" class="search-input" placeholder="Rechercher un dossier...">
                        <select class="filter-select" id="filter-dossier-type">
                            <option value="">Tous les types</option>
                            <!-- Options générées dynamiquement -->
                        </select>
                        <select class="filter-select" id="filter-dossier-statut">
                            <option value="">Tous les statuts</option>
                            <!-- Options générées dynamiquement -->
                        </select>
                        <button class="search-btn">Rechercher</button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Référence</th>
                                <th>Type</th>
                                <th>Étudiant</th>
                                <th>Date de dépôt</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="dossiers-table">
                            <!-- Le contenu sera généré dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Demandes Tab -->
            <div class="tab-content" id="demandes-content">
                <div class="content-section">
                    <h2 class="section-title">Demandes des Étudiants</h2>
                    <div class="search-filter-bar">
                        <input type="text" class="search-input" placeholder="Rechercher une demande...">
                        <select class="filter-select" id="filter-demande-type">
                            <option value="">Toutes les demandes</option>
                            <!-- Options générées dynamiquement -->
                        </select>
                        <button class="search-btn">Rechercher</button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Type</th>
                                <th>Étudiant</th>
                                <th>Date</th>
                                <th>Priorité</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="demandes-table">
                            <!-- Le contenu sera généré dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <div class="modal-backdrop" id="add-course-modal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Ajouter un Cours</h3>
                <button class="modal-close" onclick="closeModal('add-course-modal')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Enseignant</label>
                <select class="form-select" id="course-enseignant">
                    <option value="">Sélectionner un enseignant</option>
                    <!-- Options générées dynamiquement -->
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Module</label>
                <select class="form-select" id="course-module">
                    <option value="">Sélectionner un module</option>
                    <!-- Options générées dynamiquement -->
                </select>
            </div>
            <div class="grid-2col">
                <div class="form-group">
                    <label class="form-label">Groupe</label>
                    <select class="form-select" id="course-groupe">
                        <option value="">Sélectionner un groupe</option>
                        <!-- Options générées dynamiquement -->
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Salle</label>
                    <select class="form-select" id="course-salle">
                        <option value="">Sélectionner une salle</option>
                        <!-- Options générées dynamiquement -->
                    </select>
                </div>
            </div>
            <div class="grid-2col">
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-input" id="course-date" value="2025-04-14">
                </div>
                <div class="form-group">
                    <label class="form-label">Horaire</label>
                    <select class="form-select" id="course-horaire">
                        <option value="">Sélectionner un horaire</option>
                        <!-- Options générées dynamiquement -->
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Type de séance</label>
                <select class="form-select" id="course-type">
                    <option value="">Sélectionner un type</option>
                    <!-- Options générées dynamiquement -->
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Commentaire</label>
                <textarea class="form-textarea" id="course-commentaire" placeholder="Ajouter un commentaire..."></textarea>
            </div>
            <div class="form-actions">
                <button class="action-btn success">Ajouter</button>
                <button class="action-btn secondary" onclick="closeModal('add-course-modal')">Annuler</button>
            </div>
        </div>
    </div>
    
    <!-- Mobile Menu Toggle -->
    <div class="mobile-menu-toggle" id="mobile-menu-toggle">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </div>
    
    <script>
        // Données d'exemple pour les statistiques
        const statistiques = {
            totalCours: 48,
            totalDossiers: 21,
            totalDemandes: 12,
            totalNotifications: 8
        };

        // Données d'exemple pour les activités récentes
        const activitesRecentes = [
            { action: "Planification de salle", details: "Attribution de la salle A201 pour le cours d'Algorithmique", date: "14/04/2025 09:15", statut: "approved", statutText: "Complétée" },
            { action: "Vérification de dossier", details: "Dossier d'inscription de Karim Ferhat", date: "14/04/2025 08:45", statut: "approved", statutText: "Validé" },
            { action: "Traitement de demande", details: "Demande de certificat de scolarité pour Amina Khelifi", date: "13/04/2025 16:30", statut: "pending", statutText: "En cours" },
            { action: "Envoi de notification", details: "Annulation du cours de Mathématiques du 15/04", date: "13/04/2025 14:20", statut: "approved", statutText: "Envoyée" }
        ];

        // Données d'exemple pour les enseignants
        const enseignants = [
            { id: "benmohamed", nom: "Prof. Benmohamed", specialite: "Informatique" },
            { id: "hadj", nom: "Prof. Hadj", specialite: "Mathématiques" },
            { id: "kaddour", nom: "Prof. Kaddour", specialite: "Analyse" },
            { id: "benali", nom: "Prof. Benali", specialite: "Bases de Données" },
            { id: "zitouni", nom: "Prof. Zitouni", specialite: "Réseaux" }
        ];

        // Données d'exemple pour les modules
        const modules = [
            { id: "algo", nom: "Algorithmique", specialite: "Informatique" },
            { id: "prog", nom: "Programmation C++", specialite: "Informatique" },
            { id: "analyse", nom: "Analyse", specialite: "Mathématiques" },
            { id: "bdd", nom: "Bases de Données", specialite: "Informatique" },
            { id: "algebre", nom: "Algèbre", specialite: "Mathématiques" },
            { id: "reseaux", nom: "Réseaux", specialite: "Informatique" }
        ];

        // Données d'exemple pour les groupes
        const groupes = [
            { id: "l1", nom: "L1 Informatique" },
            { id: "l2", nom: "L2 Informatique" },
            { id: "l3", nom: "L3 Informatique" },
            { id: "m1", nom: "M1 Informatique" },
            { id: "m2", nom: "M2 Informatique" }
        ];

        // Données d'exemple pour les salles
        const salles = [
            { id: "A201", capacite: 40, type: "TD" },
            { id: "B102", capacite: 30, type: "TD" },
            { id: "C305", capacite: 25, type: "TP" },
            { id: "D102", capacite: 35, type: "TD" },
            { id: "AmphiA", capacite: 120, type: "Cours" },
            { id: "TP101", capacite: 20, type: "TP" }
        ];

        // Données d'exemple pour les horaires
        const horaires = [
            { id: "8-10", plage: "08:00 - 10:00" },
            { id: "10-12", plage: "10:00 - 12:00" },
            { id: "13-15", plage: "13:00 - 15:00" },
            { id: "15-17", plage: "15:00 - 17:00" }
        ];

        // Données d'exemple pour les types de séance
        const typeSeances = [
            { id: "cours", nom: "Cours" },
            { id: "td", nom: "TD" },
            { id: "tp", nom: "TP" },
            { id: "examen", nom: "Examen" }
        ];

        // Données d'exemple pour les jours de la semaine
        const jours = [
            { id: "lundi", nom: "Lundi" },
            { id: "mardi", nom: "Mardi" },
            { id: "mercredi", nom: "Mercredi" },
            { id: "jeudi", nom: "Jeudi" },
            { id: "vendredi", nom: "Vendredi" }
        ];

        // Données d'exemple pour les cours
        const cours = [
            { id: 1, enseignant: "Prof. Benmohamed", module: "Algorithmique", groupe: "L1 Informatique", salle: "A201", date: "2025-04-14", horaire: "08:00 - 10:00", type: "cours" },
            { id: 2, enseignant: "Prof. Hadj", module: "Analyse", groupe: "L2 Informatique", salle: "B102", date: "2025-04-14", horaire: "10:00 - 12:00", type: "td" },
            { id: 3, enseignant: "Prof. Kaddour", module: "Algèbre", groupe: "L1 Informatique", salle: "C305", date: "2025-04-14", horaire: "13:00 - 15:00", type: "td" },
            { id: 4, enseignant: "Prof. Benali", module: "Bases de Données", groupe: "L3 Informatique", salle: "TP101", date: "2025-04-14", horaire: "15:00 - 17:00", type: "tp" },
            { id: 5, enseignant: "Prof. Benmohamed", module: "Programmation C++", groupe: "M1 Informatique", salle: "AmphiA", date: "2025-04-15", horaire: "08:00 - 10:00", type: "cours" },
            { id: 6, enseignant: "Prof. Zitouni", module: "Réseaux", groupe: "L3 Informatique", salle: "D102", date: "2025-04-15", horaire: "10:00 - 12:00", type: "cours" }
        ];

        // Données d'exemple pour les conflits
        const conflits = [
            { id: 1, type: "Enseignant", description: "Le professeur Benmohamed a été programmé pour deux cours simultanés le jeudi de 08:00 à 10:00.", date: "Aujourd'hui, 08:30" },
            { id: 2, type: "Salle", description: "La salle A201 a été attribuée à deux cours différents le mercredi de 13:00 à 15:00.", date: "Aujourd'hui, 09:15" }
        ];

        // Données d'exemple pour les notifications
        const notifications = [
            { id: 1, type: "Changement d'horaire", destinataire: "Prof. Benmohamed", objet: "Modification du planning - Algorithmique (L1)" },
            { id: 2, type: "Changement de salle", destinataire: "Prof. Kaddour", objet: "Changement de salle - Analyse (L2)" },
            { id: 3, type: "Annulation de cours", destinataire: "Groupe L3 Info", objet: "Annulation du cours de Réseaux du 18/04" },
            { id: 4, type: "Information générale", destinataire: "Tous les enseignants", objet: "Réunion pédagogique - 20/04/2025" }
        ];

        // Données d'exemple pour les types de dossiers
        const typesDossiers = [
            { id: "inscription", nom: "Inscription" },
            { id: "certificat", nom: "Certificat" },
            { id: "dispense", nom: "Dispense" },
            { id: "attestation", nom: "Attestation" }
        ];

        // Données d'exemple pour les statuts
        const statuts = [
            { id: "pending", nom: "En attente" },
            { id: "approved", nom: "Validé" },
            { id: "denied", nom: "Refusé" }
        ];

        // Données d'exemple pour les dossiers
        const dossiers = [
            { ref: "DOS-2025-0421", type: "Inscription", etudiant: "Karim Ferhat", date: "12/04/2025", statut: "approved", statutText: "Validé" },
            { ref: "DOS-2025-0422", type: "Certificat", etudiant: "Amina Khelifi", date: "13/04/2025", statut: "pending", statutText: "En cours" },
            { ref: "DOS-2025-0420", type: "Dispense", etudiant: "Mohammed Latrèche", date: "10/04/2025", statut: "denied", statutText: "Refusé" }
        ];

        // Données d'exemple pour les types de demandes
        const typesDemandes = [
            { id: "certificat", nom: "Certificat de scolarité" },
            { id: "recours", nom: "Recours note" },
            { id: "attestation", nom: "Attestation de réussite" }
        ];

        // Données d'exemple pour les demandes
        const demandes = [
            { id: "DEM-2025-112", type: "Certificat de scolarité", etudiant: "Samira Hadjri", date: "14/04/2025", priorite: "normale", prioriteText: "Normale", statut: "pending", statutText: "En attente" },
            { id: "DEM-2025-111", type: "Recours note", etudiant: "Youcef Belhadj", date: "13/04/2025", priorite: "elevee", prioriteText: "Élevée", statut: "pending", statutText: "En attente" },
            { id: "DEM-2025-110", type: "Attestation de réussite", etudiant: "Leila Mansour", date: "12/04/2025", priorite: "basse", prioriteText: "Basse", statut: "approved", statutText: "Traitée" }
        ];

        // Fonction pour charger les données
        function loadData() {
            // Mettre à jour les statistiques
            document.getElementById('total-cours').textContent = statistiques.totalCours;
            document.getElementById('total-dossiers').textContent = statistiques.totalDossiers;
            document.getElementById('total-demandes').textContent = statistiques.totalDemandes;
            document.getElementById('total-notifications').textContent = statistiques.totalNotifications;

            // Charger les activités récentes
            const activitesTable = document.getElementById('activites-recentes-table');
            activitesTable.innerHTML = '';
            activitesRecentes.forEach(activite => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${activite.action}</td>
                    <td>${activite.details}</td>
                    <td>${activite.date}</td>
                    <td><span class="status status-${activite.statut}">${activite.statutText}</span></td>
                `;
                activitesTable.appendChild(row);
            });

            // Charger les options pour les filtres d'enseignants
            const filterEnseignant = document.getElementById('filter-enseignant');
            filterEnseignant.innerHTML = '<option value="">Tous les enseignants</option>';
            enseignants.forEach(enseignant => {
                const option = document.createElement('option');
                option.value = enseignant.id;
                option.textContent = enseignant.nom;
                filterEnseignant.appendChild(option);
            });

            // Charger les options pour les filtres de jours
            const filterJour = document.getElementById('filter-jour');
            filterJour.innerHTML = '<option value="">Toute la semaine</option>';
            jours.forEach(jour => {
                const option = document.createElement('option');
                option.value = jour.id;
                option.textContent = jour.nom;
                filterJour.appendChild(option);
            });

            // Charger le planning des enseignants
            const planningTable = document.getElementById('planning-table');
            planningTable.innerHTML = '';
            cours.forEach(c => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${c.enseignant}</td>
                    <td>${c.module}</td>
                    <td>${c.groupe}</td>
                    <td>${c.salle}</td>
                    <td>${c.date}</td>
                    <td>${c.horaire}</td>
                    <td>${c.type}</td>
                    <td>
                        <button class="action-btn">Modifier</button>
                        <button class="action-btn danger">Supprimer</button>
                    </td>
                `;
                planningTable.appendChild(row);
            });

            // Charger les conflits
            const conflitsTable = document.getElementById('conflits-table');
            conflitsTable.innerHTML = '';
            conflits.forEach(conflit => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${conflit.type}</td>
                    <td>${conflit.description}</td>
                    <td>${conflit.date}</td>
                    <td>
                        <button class="action-btn success">Résoudre</button>
                        <button class="action-btn secondary">Ignorer</button>
                    </td>
                `;
                conflitsTable.appendChild(row);
            });

            // Charger les notifications
            const notificationsTable = document.getElementById('notifications-table');
            notificationsTable.innerHTML = '';
            notifications.forEach(notification => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${notification.type}</td>
                    <td>${notification.destinataire}</td>
                    <td>${notification.objet}</td>
                    <td>
                        <button class="action-btn success">Envoyer</button>
                        <button class="action-btn secondary">Modifier</button>
                    </td>
                `;
                notificationsTable.appendChild(row);
            });

            // Charger les options pour les filtres de types de dossiers
            const filterDossierType = document.getElementById('filter-dossier-type');
            filterDossierType.innerHTML = '<option value="">Tous les types</option>';
            typesDossiers.forEach(type => {
                const option = document.createElement('option');
                option.value = type.id;
                option.textContent = type.nom;
                filterDossierType.appendChild(option);
            });

            // Charger les options pour les filtres de statuts de dossiers
            const filterDossierStatut = document.getElementById('filter-dossier-statut');
            filterDossierStatut.innerHTML = '<option value="">Tous les statuts</option>';
            statuts.forEach(statut => {
                const option = document.createElement('option');
                option.value = statut.id;
                option.textContent = statut.nom;
                filterDossierStatut.appendChild(option);
            });

            // Charger les dossiers
            const dossiersTable = document.getElementById('dossiers-table');
            dossiersTable.innerHTML = '';
            dossiers.forEach(dossier => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${dossier.ref}</td>
                    <td>${dossier.type}</td>
                    <td>${dossier.etudiant}</td>
                    <td>${dossier.date}</td>
                    <td><span class="status status-${dossier.statut}">${dossier.statutText}</span></td>
                    <td>
                        <button class="action-btn">Voir</button>
                        <button class="action-btn secondary">Modifier</button>
                    </td>
                `;
                dossiersTable.appendChild(row);
            });

            // Charger les options pour les filtres de types de demandes
            const filterDemandeType = document.getElementById('filter-demande-type');
            filterDemandeType.innerHTML = '<option value="">Toutes les demandes</option>';
            typesDemandes.forEach(type => {
                const option = document.createElement('option');
                option.value = type.id;
                option.textContent = type.nom;
                filterDemandeType.appendChild(option);
            });

            // Charger les demandes
            const demandesTable = document.getElementById('demandes-table');
            demandesTable.innerHTML = '';
            demandes.forEach(demande => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${demande.id}</td>
                    <td>${demande.type}</td>
                    <td>${demande.etudiant}</td>
                    <td>${demande.date}</td>
                    <td><span class="status status-${demande.priorite === 'elevee' ? 'denied' : demande.priorite === 'normale' ? 'pending' : 'approved'}">${demande.prioriteText}</span></td>
                    <td><span class="status status-${demande.statut}">${demande.statutText}</span></td>
                    <td>
                        ${demande.statut === 'pending' ? 
                            `<button class="action-btn">Traiter</button>
                             <button class="action-btn secondary">Contacter</button>` : 
                            `<button class="action-btn">Voir</button>
                             <button class="action-btn secondary">Imprimer</button>`
                        }
                    </td>
                `;
                demandesTable.appendChild(row);
            });

            // Charger les options pour le formulaire d'ajout de cours
            const courseEnseignant = document.getElementById('course-enseignant');
            courseEnseignant.innerHTML = '<option value="">Sélectionner un enseignant</option>';
            enseignants.forEach(enseignant => {
                const option = document.createElement('option');
                option.value = enseignant.id;
                option.textContent = enseignant.nom;
                courseEnseignant.appendChild(option);
            });

            const courseModule = document.getElementById('course-module');
            courseModule.innerHTML = '<option value="">Sélectionner un module</option>';
            modules.forEach(module => {
                const option = document.createElement('option');
                option.value = module.id;
                option.textContent = module.nom;
                courseModule.appendChild(option);
            });

            const courseGroupe = document.getElementById('course-groupe');
            courseGroupe.innerHTML = '<option value="">Sélectionner un groupe</option>';
            groupes.forEach(groupe => {
                const option = document.createElement('option');
                option.value = groupe.id;
                option.textContent = groupe.nom;
                courseGroupe.appendChild(option);
            });

            const courseSalle = document.getElementById('course-salle');
            courseSalle.innerHTML = '<option value="">Sélectionner une salle</option>';
            salles.forEach(salle => {
                const option = document.createElement('option');
                option.value = salle.id;
                option.textContent = `${salle.id} (${salle.type}, ${salle.capacite} places)`;
                courseSalle.appendChild(option);
            });

            const courseHoraire = document.getElementById('course-horaire');
            courseHoraire.innerHTML = '<option value="">Sélectionner un horaire</option>';
            horaires.forEach(horaire => {
                const option = document.createElement('option');
                option.value = horaire.id;
                option.textContent = horaire.plage;
                courseHoraire.appendChild(option);
            });

            const courseType = document.getElementById('course-type');
            courseType.innerHTML = '<option value="">Sélectionner un type</option>';
            typeSeances.forEach(type => {
                const option = document.createElement('option');
                option.value = type.id;
                option.textContent = type.nom;
                courseType.appendChild(option);
            });
        }

        // Mobile Menu Toggle
        document.getElementById('mobile-menu-toggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('active');
        });
        
        // Change main navigation tab
        function changeTab(tabId) {
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            switch(tabId) {
                case 'tableau-bord':
                    document.getElementById('tableau-bord-content').classList.add('active');
                    break;
                case 'plannings':
                    document.getElementById('planning-enseignants-content').classList.add('active');
                    break;
                case 'notifications':
                    document.getElementById('notifications-content').classList.add('active');
                    break;
                case 'dossiers':
                    document.getElementById('dossiers-content').classList.add('active');
                    break;
                case 'demandes':
                    document.getElementById('demandes-content').classList.add('active');
                    break;
                default:
                    document.getElementById('tableau-bord-content').classList.add('active');
            }
            
            // Fermer le menu mobile après sélection sur petit écran
            if (window.innerWidth < 768) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }
        
        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Close modal when clicking outside
        document.querySelectorAll('.modal-backdrop').forEach(backdrop => {
            backdrop.addEventListener('click', function(event) {
                if (event.target === backdrop) {
                    backdrop.style.display = 'none';
                }
            });
        });
        
        // Initialiser la date actuelle et charger les données
        document.addEventListener('DOMContentLoaded', function() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const today = new Date();
            document.getElementById('current-date').textContent = today.toLocaleDateString('fr-FR', options);
            
            // Charger les données
            loadData();
        });

        // Initialize the app with default tab
        document.addEventListener('DOMContentLoaded', function() {
            const REQUIRED_ROLE = 'secretaire';
            const token = sessionStorage.getItem('admin_token') || localStorage.getItem('admin_token');
            
            if (!token) {
                window.location.href = `admin-login.html?requestedRole=${REQUIRED_ROLE}`;
                return;
            }
        
            fetch('http://localhost:3000/api/auth/verify', {
                method: 'GET',
                headers: { 
                  'Authorization': `Bearer ${token}`,
                  'Content-Type': 'application/json'
                },
                mode: 'cors',
                credentials: 'include'
              })
            .then(response => {
                if (!response.ok) throw new Error('Invalid token');
                return response.json();
            })
            .then(data => {
                if (data.userType !== REQUIRED_ROLE) {
                    throw new Error('Role mismatch');
                }
                // Load protected content here
            })
            .catch(error => {
                console.error('Access denied:', error);
                sessionStorage.clear();
                localStorage.clear();
                window.location.href = `admin-login.html?requestedRole=${REQUIRED_ROLE}`;
            });
        });

    </script>
</body>
</html>